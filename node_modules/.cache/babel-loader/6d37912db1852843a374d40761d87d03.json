{"ast":null,"code":"import _defineProperty from\"/Users/aizhansapina/Desktop/Diploma-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/aizhansapina/Desktop/Diploma-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/Users/aizhansapina/Desktop/Diploma-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/aizhansapina/Desktop/Diploma-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/aizhansapina/Desktop/Diploma-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/aizhansapina/Desktop/Diploma-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import Input from\"../../../shared/input/Input\";import{connect}from\"react-redux\";import{authorize}from\"../../../../store/actions/authActions\";import{register}from\"../../../../services/auth\";import\"../../../shared/header/Header-shop.scss\";import\"./Register.scss\";var Register=/*#__PURE__*/function(_Component){_inherits(Register,_Component);var _super=_createSuper(Register);function Register(props){var _this;_classCallCheck(this,Register);_this=_super.call(this,props);_this.validateForm=function(values){var errors={};var emailRegExp=new RegExp(['^(([^<>()[\\\\]\\\\.,;:\\\\s@\"]+(\\\\.[^<>()\\\\[\\\\]\\\\.,;:\\\\s@\"]+)*)','|(\".+\"))@((\\\\[[0-9]{1,3}\\\\.[0-9]{1,3}\\\\.[0-9]{1,3}\\\\.',\"[0-9]{1,3}])|(([a-zA-Z\\\\-0-9]+\\\\.)+\",\"[a-zA-Z]{2,}))$\"].join(\"\"));if(!values.email){errors.email=\"Email is required\";}else if(!emailRegExp.test(values.email)){errors.email=\"Email must be valid\";}if(!values.password){errors.password=\"Password is required\";}else if(values.password.length<=8){errors.password=\"Password must be no shorter than 8 symbols\";}if(!values.rePassword){errors.rePassword=\"Re-enter your password\";}else if(values.password!==values.rePassword){errors.rePassword=\"Passwords don't match\";}return errors;};_this.handleSubmit=function(e){console.log(_this.state);e.preventDefault();register(_this.state.fields.email,_this.state.fields.password1,_this.state.fields.full_name).then(function(response){console.log(response);_this.props.history.push('/main/profile');}).catch(console.error);};_this.setFormField=function(e){var _e$target=e.target,name=_e$target.name,value=_e$target.value;_this.setState(function(prevState){return _objectSpread({},prevState,{fields:_objectSpread({},prevState.fields,_defineProperty({},name,value))});});};_this.state={errorFields:{},fields:{full_name:'',lastName:'',email:'',password1:'',rePassword:''}};return _this;}_createClass(Register,[{key:\"render\",value:function render(){var _this$state=this.state,_this$state$fields=_this$state.fields,email=_this$state$fields.email,password1=_this$state$fields.password1,rePassword=_this$state$fields.rePassword,full_name=_this$state$fields.full_name,lastName=_this$state$fields.lastName,_this$state$errorFiel=_this$state.errorFields,emailError=_this$state$errorFiel.email,passwordError=_this$state$errorFiel.password;return/*#__PURE__*/React.createElement(\"div\",{className:\"Register\"},/*#__PURE__*/React.createElement(\"h2\",{className:\"Register__title\"},\"Create account\"),/*#__PURE__*/React.createElement(\"form\",{onSubmit:this.handleSubmit,className:\"Register__form\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form__input\"},/*#__PURE__*/React.createElement(Input,{name:\"full_name\",type:\"text\",onChange:this.setFormField,className:\"input\",placeholder:\"First Name\",value:full_name}),/*#__PURE__*/React.createElement(\"span\",{class:\"form__underline\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"form__input\"},/*#__PURE__*/React.createElement(Input,{name:\"lastName\",type:\"text\",className:\"input\",onChange:this.setFormField,placeholder:\"Last Name\",value:lastName}),/*#__PURE__*/React.createElement(\"span\",{class:\"form__underline\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"form__input\"},/*#__PURE__*/React.createElement(Input,{name:\"email\",type:\"text\",onChange:this.setFormField,className:\"input\",placeholder:\"Email\",value:email}),/*#__PURE__*/React.createElement(\"span\",{class:\"form__underline\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"form__input\"},/*#__PURE__*/React.createElement(Input,{name:\"password1\",type:\"password\",onChange:this.setFormField,placeholder:\"Password\",value:password1}),/*#__PURE__*/React.createElement(\"span\",{class:\"form__underline\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"form__input\"},/*#__PURE__*/React.createElement(Input,{name:\"rePassword\",type:\"password\",onChange:this.setFormField,placeholder:\"Repeat password\",value:rePassword}),/*#__PURE__*/React.createElement(\"span\",{class:\"form__underline\"})),this.state.formError&&/*#__PURE__*/React.createElement(\"p\",{className:\"text--error\"},this.state.formError),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",className:\"form__button\"},\"create\")));}}]);return Register;}(Component);export default connect(null,{authorize:authorize})(Register);","map":{"version":3,"sources":["/Users/aizhansapina/Desktop/Diploma-front/src/components/pages/auth/register/Register.js"],"names":["React","Component","Input","connect","authorize","register","Register","props","validateForm","values","errors","emailRegExp","RegExp","join","email","test","password","length","rePassword","handleSubmit","e","console","log","state","preventDefault","fields","password1","full_name","then","response","history","push","catch","error","setFormField","target","name","value","setState","prevState","errorFields","lastName","emailError","passwordError","formError"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport Input from \"../../../shared/input/Input\";\n\nimport { connect } from \"react-redux\";\nimport { authorize } from \"../../../../store/actions/authActions\";\nimport { register } from \"../../../../services/auth\";\nimport \"../../../shared/header/Header-shop.scss\";\n\nimport \"./Register.scss\";\n\nclass Register extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      errorFields: {},\n      fields: {\n        full_name: '',\n        lastName: '',\n        email: '',\n        password1: '',\n        rePassword: '',\n      }\n    };\n  }\n\n  validateForm = values => {\n    const errors = {};\n\n    const emailRegExp = new RegExp(\n      [\n        '^(([^<>()[\\\\]\\\\.,;:\\\\s@\"]+(\\\\.[^<>()\\\\[\\\\]\\\\.,;:\\\\s@\"]+)*)',\n        '|(\".+\"))@((\\\\[[0-9]{1,3}\\\\.[0-9]{1,3}\\\\.[0-9]{1,3}\\\\.',\n        \"[0-9]{1,3}])|(([a-zA-Z\\\\-0-9]+\\\\.)+\",\n        \"[a-zA-Z]{2,}))$\"\n      ].join(\"\")\n    );\n\n    if (!values.email) {\n      errors.email = \"Email is required\";\n    } else if (!emailRegExp.test(values.email)) {\n      errors.email = \"Email must be valid\";\n    }\n\n    if (!values.password) {\n      errors.password = \"Password is required\";\n    } else if (values.password.length <= 8) {\n      errors.password = \"Password must be no shorter than 8 symbols\";\n    }\n\n    if (!values.rePassword) {\n      errors.rePassword = \"Re-enter your password\";\n    } else if (values.password !== values.rePassword) {\n      errors.rePassword = \"Passwords don't match\";\n    }\n\n    return errors;\n  };\n\n  handleSubmit = e => {\n    console.log(this.state)\n    e.preventDefault();\n      register(this.state.fields.email, this.state.fields.password1, this.state.fields.full_name)\n        .then(response => {\n          console.log(response)\n          this.props.history.push('/main/profile');\n        })\n        .catch(console.error)\n  }\n\n  setFormField = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    this.setState(prevState => ({\n      ...prevState,\n      fields: {\n        ...prevState.fields,\n        [name]: value,\n      },\n    }));\n  };\n\n  render() {\n    const {\n      fields: {\n        email, password1, rePassword, full_name, lastName\n      },\n      errorFields: {\n        email: emailError, password: passwordError\n      }\n    } = this.state;\n    return (\n      <div className=\"Register\">\n        <h2 className=\"Register__title\">Create account</h2>\n        <form onSubmit={this.handleSubmit} className=\"Register__form\">\n      <div className=\"form__input\">\n        <Input\n          name=\"full_name\"\n          type=\"text\"\n          onChange={this.setFormField}\n          className=\"input\"\n          placeholder=\"First Name\"\n          value={full_name}\n        />\n        <span class=\"form__underline\"></span>\n      </div>\n      <div className=\"form__input\">\n        <Input\n          name=\"lastName\"\n          type=\"text\"\n          className=\"input\"\n          onChange={this.setFormField}\n          placeholder=\"Last Name\"\n          value={lastName}\n        />\n        <span class=\"form__underline\"></span>\n      </div>\n      <div className=\"form__input\">\n        <Input\n          name=\"email\"\n          type=\"text\"\n          onChange={this.setFormField}\n          className=\"input\"\n          placeholder=\"Email\"\n          value={email}\n        />\n        <span class=\"form__underline\"></span>\n      </div>\n      <div className=\"form__input\">\n        <Input\n          name=\"password1\"\n          type=\"password\"\n          onChange={this.setFormField}\n          placeholder=\"Password\"\n          value={password1}\n        />\n        <span class=\"form__underline\"></span>\n      </div>\n      <div className=\"form__input\">\n        <Input\n          name=\"rePassword\"\n          type=\"password\"\n          onChange={this.setFormField}\n          placeholder=\"Repeat password\"\n          value={rePassword}\n        />\n        <span class=\"form__underline\"></span>\n      </div>\n      {this.state.formError && (\n        <p className=\"text--error\">{this.state.formError}</p>\n      )}\n      <button type=\"submit\" className=\"form__button\">\n        create\n      </button>\n    </form>\n      </div>\n    );\n  }\n}\n\nexport default connect(null, { authorize })(Register);\n"]},"metadata":{},"sourceType":"module"}