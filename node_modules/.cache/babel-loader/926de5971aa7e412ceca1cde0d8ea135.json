{"ast":null,"code":"import _classCallCheck from\"/Users/aizhansapina/Desktop/Diploma-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/aizhansapina/Desktop/Diploma-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/aizhansapina/Desktop/Diploma-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/aizhansapina/Desktop/Diploma-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import{NavLink,withRouter}from\"react-router-dom\";import{connect}from\"react-redux\";import{addToCart as _addToCart}from\"../../../store/actions/cartActions\";import\"../../shared/header/Header-shop.scss\";import\"./Main.scss\";var Main=/*#__PURE__*/function(_Component){_inherits(Main,_Component);var _super=_createSuper(Main);function Main(props){var _this;_classCallCheck(this,Main);_this=_super.call(this,props);_this.handleClick=function(id){_this.props.addToCart(id);};_this.onRegisterClick=function(){return _this.props.history.push('/auth/register');};_this.state={isLoggedIn:false,subscriptions:[]};return _this;}_createClass(Main,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;var token=sessionStorage.getItem('token');this.setState({isLoggedIn:Boolean(!token)});var url=\"http://104.248.114.51/subscriptions/get_subscriptions/\";fetch(url).then(function(results){return results.json();}).then(function(data){_this2.setState({subscriptions:data});console.log(_this2.state.subscriptions);});}},{key:\"render\",value:function render(){var _this3=this;var _this$state=this.state,isLoggedIn=_this$state.isLoggedIn,subscriptions=_this$state.subscriptions;var itemList=subscriptions.map(function(item){return/*#__PURE__*/React.createElement(\"div\",{className:\"Product__column\",key:item.id},/*#__PURE__*/React.createElement(\"div\",{className:\"Product__img\"},/*#__PURE__*/React.createElement(\"span\",{className:\"Product__name\"},item.name),/*#__PURE__*/React.createElement(\"p\",{className:\"Product__list\"},item.description_short),/*#__PURE__*/React.createElement(\"p\",{className:\"Product__list\"},item.description_full),/*#__PURE__*/React.createElement(\"p\",{className:\"Product__list\"},\"Discount: \",item.discount),/*#__PURE__*/React.createElement(\"p\",{className:\"Product__list\"},\"Days: \",item.days)),/*#__PURE__*/React.createElement(\"div\",{className:\"Product__description\"},/*#__PURE__*/React.createElement(\"p\",{className:\"Product__title\"},item.title),/*#__PURE__*/React.createElement(\"p\",{className:\"Product__price\"},item.price,\"\\u20B8\"),/*#__PURE__*/React.createElement(\"button\",{className:\"to-cart\",onClick:function onClick(){_this3.handleClick(item.id);},disabled:!isLoggedIn},\"get now\")));});return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h1\",{className:\"Register-button__title\"},\"Do you want a demo lesson?\"),!isLoggedIn&&/*#__PURE__*/React.createElement(\"button\",{onClick:this.onRegisterClick,className:\"Product__button\"},/*#__PURE__*/React.createElement(NavLink,{className:\"button__text\",to:\"/auth/register\"},\"Register first\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"Product__row\"},itemList));}}]);return Main;}(Component);var mapStateToProps=function mapStateToProps(state){return{items:state.items};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{addToCart:function addToCart(id){dispatch(_addToCart(id));}};};export default withRouter(connect(mapStateToProps,mapDispatchToProps)(Main));","map":{"version":3,"sources":["/Users/aizhansapina/Desktop/Diploma-front/src/components/pages/main/Main.js"],"names":["React","Component","NavLink","withRouter","connect","addToCart","Main","props","handleClick","id","onRegisterClick","history","push","state","isLoggedIn","subscriptions","token","sessionStorage","getItem","setState","Boolean","url","fetch","then","results","json","data","console","log","itemList","map","item","name","description_short","description_full","discount","days","title","price","mapStateToProps","items","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { NavLink, withRouter } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport { addToCart } from \"../../../store/actions/cartActions\";\n\nimport \"../../shared/header/Header-shop.scss\";\nimport \"./Main.scss\";\n\nclass Main extends Component {\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      isLoggedIn: false,\n      subscriptions: []\n    }\n  }\n\n  componentDidMount() {\n    const token = sessionStorage.getItem('token');\n\n    this.setState({\n      isLoggedIn: Boolean(!token)\n    });\n\n    const url = \"http://104.248.114.51/subscriptions/get_subscriptions/\";\n    fetch(url)\n    .then( results => {\n      return results.json();\n    }).then(data => {\n      this.setState({subscriptions: data})\n      console.log(this.state.subscriptions)\n    })\n  }\n\n  handleClick = id => {\n    this.props.addToCart(id);\n  };\n\n  onRegisterClick = () => this.props.history.push('/auth/register')\n\n  render() {\n    const { isLoggedIn, subscriptions } = this.state;\n    let itemList = subscriptions.map(item => {\n      return (\n        <div className=\"Product__column\" key={item.id}>\n          {/* <img src={item.img} alt={item.title} className=\"Product__img\" /> */}\n          <div className=\"Product__img\">\n            <span className=\"Product__name\">{item.name}</span>\n            <p className=\"Product__list\">{item.description_short}</p>\n            <p className=\"Product__list\">{item.description_full}</p>\n            <p className=\"Product__list\">Discount: {item.discount}</p>\n            <p className=\"Product__list\">Days: {item.days}</p>\n          </div>\n          <div className=\"Product__description\">\n            <p className=\"Product__title\">{item.title}</p>\n            <p className=\"Product__price\">{item.price}â‚¸</p>\n            <button\n              className=\"to-cart\"\n              onClick={() => {\n                this.handleClick(item.id);\n              }}\n              disabled={!isLoggedIn}\n            >\n              get now\n            </button>\n          </div>\n        </div>\n      );\n    });\n\n\n    return (\n      <div>\n        <div>\n          <h1 className=\"Register-button__title\">Do you want a demo lesson?</h1>\n          {!isLoggedIn && (\n              <button onClick={this.onRegisterClick} className=\"Product__button\">\n                {/* <span className=\"button__text\">register first</span> */}\n                <NavLink className=\"button__text\" to=\"/auth/register\">\n                  Register first\n                </NavLink>\n              </button>\n          )}\n        </div>\n        <div className=\"Product__row\">{itemList}</div>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    items: state.items\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    addToCart: id => {\n      dispatch(addToCart(id));\n    }\n  };\n};\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(Main));\n"]},"metadata":{},"sourceType":"module"}