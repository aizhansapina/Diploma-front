{"ast":null,"code":"var _jsxFileName = \"/Users/aizhansapina/Desktop/Diploma-front/src/components/pages/main/Main.js\";\nimport React, { Component } from \"react\";\nimport { NavLink, withRouter } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport { addToCart } from \"../../../store/actions/cartActions\";\nimport \"../../shared/header/Header-shop.scss\";\nimport \"./Main.scss\";\n\nclass Main extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleClick = id => {\n      this.props.addToCart(id);\n    };\n\n    this.onRegisterClick = () => this.props.history.push('/auth/register');\n\n    this.state = {\n      isLoggedIn: false,\n      subscriptions: []\n    };\n  }\n\n  componentDidMount() {\n    const token = sessionStorage.getItem('token');\n    this.setState({\n      isLoggedIn: Boolean(!token)\n    });\n    const url = \"http://104.248.114.51/subscriptions/get_subscriptions/\";\n    fetch(url).then(results => {\n      return results.json();\n    }).then(data => {\n      this.setState({\n        subscriptions: data\n      });\n      console.log(this.state.subscriptions);\n    });\n  }\n\n  render() {\n    const {\n      isLoggedIn,\n      subscriptions\n    } = this.state;\n    let itemList = subscriptions.map(item => {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"Product__column\",\n        key: item.id,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"Product__img\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"Product__name\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 13\n        }\n      }, item.name), /*#__PURE__*/React.createElement(\"p\", {\n        className: \"Product__list\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 13\n        }\n      }, item.description_short), /*#__PURE__*/React.createElement(\"p\", {\n        className: \"Product__list\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 13\n        }\n      }, item.description_full), /*#__PURE__*/React.createElement(\"p\", {\n        className: \"Product__list\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 13\n        }\n      }, \"Discount: \", item.discount), /*#__PURE__*/React.createElement(\"p\", {\n        className: \"Product__list\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 13\n        }\n      }, \"Days: \", item.days)), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"Product__description\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        className: \"Product__title\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 13\n        }\n      }, item.title), /*#__PURE__*/React.createElement(\"p\", {\n        className: \"Product__price\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 13\n        }\n      }, item.price, \"\\u20B8\"), /*#__PURE__*/React.createElement(\"button\", {\n        className: \"to-cart\",\n        onClick: () => {\n          this.handleClick(item.id);\n        },\n        disabled: !isLoggedIn,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 13\n        }\n      }, \"get now\")));\n    });\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      className: \"Register-button__title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 11\n      }\n    }, \"Do you want a demo lesson?\"), !isLoggedIn && /*#__PURE__*/React.createElement(\"button\", {\n      onClick: this.onRegisterClick,\n      className: \"Product__button\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(NavLink, {\n      className: \"button__text\",\n      to: \"/auth/register\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 17\n      }\n    }, \"Register first\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"Product__row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }\n    }, itemList));\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    items: state.items\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    addToCart: id => {\n      dispatch(addToCart(id));\n    }\n  };\n};\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(Main));","map":{"version":3,"sources":["/Users/aizhansapina/Desktop/Diploma-front/src/components/pages/main/Main.js"],"names":["React","Component","NavLink","withRouter","connect","addToCart","Main","constructor","props","handleClick","id","onRegisterClick","history","push","state","isLoggedIn","subscriptions","componentDidMount","token","sessionStorage","getItem","setState","Boolean","url","fetch","then","results","json","data","console","log","render","itemList","map","item","name","description_short","description_full","discount","days","title","price","mapStateToProps","items","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { NavLink, withRouter } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport { addToCart } from \"../../../store/actions/cartActions\";\n\nimport \"../../shared/header/Header-shop.scss\";\nimport \"./Main.scss\";\n\nclass Main extends Component {\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      isLoggedIn: false,\n      subscriptions: []\n    }\n  }\n\n  componentDidMount() {\n    const token = sessionStorage.getItem('token');\n\n    this.setState({\n      isLoggedIn: Boolean(!token)\n    });\n\n    const url = \"http://104.248.114.51/subscriptions/get_subscriptions/\";\n    fetch(url)\n    .then( results => {\n      return results.json();\n    }).then(data => {\n      this.setState({subscriptions: data})\n      console.log(this.state.subscriptions)\n    })\n  }\n\n  handleClick = id => {\n    this.props.addToCart(id);\n  };\n\n  onRegisterClick = () => this.props.history.push('/auth/register')\n\n  render() {\n    const { isLoggedIn, subscriptions } = this.state;\n    let itemList = subscriptions.map(item => {\n      return (\n        <div className=\"Product__column\" key={item.id}>\n          {/* <img src={item.img} alt={item.title} className=\"Product__img\" /> */}\n          <div className=\"Product__img\">\n            <span className=\"Product__name\">{item.name}</span>\n            <p className=\"Product__list\">{item.description_short}</p>\n            <p className=\"Product__list\">{item.description_full}</p>\n            <p className=\"Product__list\">Discount: {item.discount}</p>\n            <p className=\"Product__list\">Days: {item.days}</p>\n          </div>\n          <div className=\"Product__description\">\n            <p className=\"Product__title\">{item.title}</p>\n            <p className=\"Product__price\">{item.price}₸</p>\n            <button\n              className=\"to-cart\"\n              onClick={() => {\n                this.handleClick(item.id);\n              }}\n              disabled={!isLoggedIn}\n            >\n              get now\n            </button>\n          </div>\n        </div>\n      );\n    });\n\n\n    return (\n      <div>\n        <div>\n          <h1 className=\"Register-button__title\">Do you want a demo lesson?</h1>\n          {!isLoggedIn && (\n              <button onClick={this.onRegisterClick} className=\"Product__button\">\n                {/* <span className=\"button__text\">register first</span> */}\n                <NavLink className=\"button__text\" to=\"/auth/register\">\n                  Register first\n                </NavLink>\n              </button>\n          )}\n        </div>\n        <div className=\"Product__row\">{itemList}</div>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    items: state.items\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    addToCart: id => {\n      dispatch(addToCart(id));\n    }\n  };\n};\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(Main));\n"]},"metadata":{},"sourceType":"module"}