{"ast":null,"code":"import _defineProperty from\"/Users/aizhansapina/Desktop/Diploma-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/aizhansapina/Desktop/Diploma-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/Users/aizhansapina/Desktop/Diploma-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/aizhansapina/Desktop/Diploma-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/aizhansapina/Desktop/Diploma-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/aizhansapina/Desktop/Diploma-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import Input from\"../../../shared/input/Input\";import{connect}from\"react-redux\";import{withRouter}from'react-router-dom';import{login}from\"../../../../services/auth\";import{authorize}from\"../../../../store/actions/authActions\";import{validateEmail}from'../services/validation';import\"../../../shared/header/Header-shop.scss\";import\"../register/Register.scss\";var Login=/*#__PURE__*/function(_Component){_inherits(Login,_Component);var _super=_createSuper(Login);function Login(props){var _this;_classCallCheck(this,Login);_this=_super.call(this,props);_this.setFormField=function(e){var _e$target=e.target,name=_e$target.name,value=_e$target.value;_this.setState(function(prevState){return _objectSpread({},prevState,{fields:_objectSpread({},prevState.fields,_defineProperty({},name,value))});});};_this.validate=function(){var fields=_this.state.fields;var errorFields={};if(!fields.email){errorFields.email='Email required';}else if(!validateEmail(fields.email)){errorFields.email='Email not valid';}if(!fields.password){errorFields.password='Fill password';}if(errorFields.email||errorFields.password){_this.setState({errorFields:errorFields});return false;}return true;};_this.handleSubmit=function(e){e.preventDefault();login(_this.state.fields.email,_this.state.fields.password).then(function(response){// sessionStorage.setItem('token', response.token);\n_this.props.history.push('/main/page');}).catch(console.error);};_this.state={errorFields:{},fields:{email:'',password:''}};return _this;}_createClass(Login,[{key:\"render\",value:function render(){var _this$state=this.state,_this$state$fields=_this$state.fields,email=_this$state$fields.email,password=_this$state$fields.password,_this$state$errorFiel=_this$state.errorFields,emailError=_this$state$errorFiel.email,passwordError=_this$state$errorFiel.password;return/*#__PURE__*/React.createElement(\"div\",{className:\"Register\"},/*#__PURE__*/React.createElement(\"h2\",{className:\"Register__title\"},\"login\"),/*#__PURE__*/React.createElement(\"form\",{onSubmit:this.handleSubmit,className:\"Register__form\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form__input\"},/*#__PURE__*/React.createElement(Input,{name:\"email\",type:\"text\",onChange:this.setFormField,className:\"input\",placeholder:\"Email\",autocomplete:\"off\",value:email}),/*#__PURE__*/React.createElement(\"span\",{className:\"form__underline\"},emailError)),/*#__PURE__*/React.createElement(\"div\",{className:\"form__input\"},/*#__PURE__*/React.createElement(Input,{name:\"password\",type:\"password\",value:password,onChange:this.setFormField,className:\"input\",placeholder:\"Password\",autocomplete:\"off\"}),/*#__PURE__*/React.createElement(\"span\",{className:\"form__underline\"},passwordError)),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",className:\"form__button\"},\"sign in\")));}}]);return Login;}(Component);export default withRouter(connect(null,{authorize:authorize})(Login));","map":{"version":3,"sources":["/Users/aizhansapina/Desktop/Diploma-front/src/components/pages/auth/login/Login.js"],"names":["React","Component","Input","connect","withRouter","login","authorize","validateEmail","Login","props","setFormField","e","target","name","value","setState","prevState","fields","validate","state","errorFields","email","password","handleSubmit","preventDefault","then","response","history","push","catch","console","error","emailError","passwordError"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\n\nimport Input from \"../../../shared/input/Input\";\n\nimport { connect } from \"react-redux\";\nimport { withRouter } from 'react-router-dom';\nimport { login } from \"../../../../services/auth\";\nimport { authorize } from \"../../../../store/actions/authActions\";\n\nimport { validateEmail } from '../services/validation';\n\nimport \"../../../shared/header/Header-shop.scss\";\n\nimport \"../register/Register.scss\";\n\nclass Login extends Component {\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      errorFields: {},\n      fields: {\n        email: '',\n        password: '',\n      }\n    };\n  }\n\n  setFormField = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    this.setState(prevState => ({\n      ...prevState,\n      fields: {\n        ...prevState.fields,\n        [name]: value,\n      },\n    }));\n  };\n\n  validate = () => {\n    const { fields } = this.state;\n    const errorFields = {};\n\n    if (!fields.email) {\n      errorFields.email = 'Email required';\n    } else if (!validateEmail(fields.email)) {\n      errorFields.email = 'Email not valid';\n    }\n\n    if (!fields.password) {\n      errorFields.password = 'Fill password';\n    }\n\n    if (errorFields.email || errorFields.password) {\n      this.setState({ errorFields });\n      return false;\n    }\n    return true;\n  };\n\n  handleSubmit = e => {\n    e.preventDefault();\n      login(this.state.fields.email, this.state.fields.password)\n        .then(response => {\n          // sessionStorage.setItem('token', response.token);\n          this.props.history.push('/main/page');\n        })\n        .catch(console.error)\n  }\n\n\n  render() {\n    const {\n      fields: {\n        email, password\n      },\n      errorFields: {\n        email: emailError, password: passwordError\n      }\n    } = this.state;\n    return (\n      <div className=\"Register\">\n        <h2 className=\"Register__title\">login</h2>\n        <form onSubmit={this.handleSubmit} className=\"Register__form\">\n          <div className=\"form__input\">\n            <Input\n              name=\"email\"\n              type=\"text\"\n              onChange={this.setFormField}\n              className=\"input\"\n              placeholder=\"Email\"\n              autocomplete='off'\n              value={email}\n            />\n            <span className=\"form__underline\">{emailError}</span>\n          </div>\n\n          <div className=\"form__input\">\n            <Input\n                name=\"password\"\n                type=\"password\"\n                value={password}\n                onChange={this.setFormField}\n                className=\"input\"\n                placeholder=\"Password\"\n                autocomplete='off'\n            />\n            <span className=\"form__underline\">{passwordError}</span>\n          </div>\n          <button type=\"submit\" className=\"form__button\">\n            sign in\n          </button>\n        </form>\n      </div>\n    );\n  }\n}\n\nexport default withRouter(connect(null, {\n  authorize\n})(Login));"]},"metadata":{},"sourceType":"module"}